<!DOCTYPE html>

<html>
<head>
<title>How to demonstrate that a differentiable function $f: \mathbb Q\rightarrow \mathbb Q$ is not uniformly continuous</title>
<link href="https://cdn.sstatic.net/Shared/stacks.css?v=079c5e1603be" rel="stylesheet" type="text/css"/>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript"> </script>
<link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap-theme.min.css" rel="stylesheet"/>
<style>
        .row {
          display: block;
          margin-left: auto;
          margin-right: auto;
          width:50%;
        }
        tr {
          border:1px solid lightgrey;
        }
        </style>
</head>
<body>
<div>
<div class="row" id="question-title">
<h1> How to demonstrate that a differentiable function <span class="math-container" id="28270371" visual_id="10759"><math alttext="f:\mathbb{Q}\rightarrow\mathbb{Q}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mrow><mi>ℚ</mi><mo>→</mo><mi>ℚ</mi></mrow></mrow></semantics></math></span> is not uniformly continuous </h1>
<hr/>
</div>
<div class="row">
<div class="question">
<div id="question" question_id="3053109">
<p>Following the scheme given by <a href="https://math.stackexchange.com/users/17445/mercio">mercio</a> in the answer to this <a href="https://math.stackexchange.com/questions/1649179/function-bbb-q-rightarrow-bbb-q-with-everywhere-irrational-derivative/1649417#1649417">question</a>, one can construct a function <span class="math-container" id="28270372" visual_id="10759"><math alttext="f:\mathbb{Q}\rightarrow\mathbb{Q}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mrow><mi>ℚ</mi><mo>→</mo><mi>ℚ</mi></mrow></mrow></semantics></math></span>, differentiable everywhere, with derivative function<br/> <span class="math-container" id="28270373" visual_id="8213979"><math alttext="f^{\prime}(x)=\begin{cases}0,&amp;amp;(x\neq 0),\\ 1,&amp;amp;(x=0).\end{cases}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msup><mi>f</mi><mo>′</mo></msup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><mo>{</mo><mtable columnspacing="5pt" rowspacing="0pt"><mtr><mtd columnalign="left"><mrow><mn>0</mn><mo>,</mo></mrow></mtd><mtd columnalign="left"><mrow><mi>a</mi><mi>m</mi><mi>p</mi><mo>;</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>≠</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>,</mo></mrow></mtd></mtr><mtr><mtd columnalign="left"><mrow><mn>1</mn><mo>,</mo></mrow></mtd><mtd columnalign="left"><mrow><mi>a</mi><mi>m</mi><mi>p</mi><mo>;</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>=</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>.</mo></mrow></mtd></mtr></mtable></mrow></mrow></semantics></math></span> Such function <em>cannot</em> be uniformly continuous, because otherwise, in any closed interval containing <span class="math-container" id="28270374" visual_id="92"><math alttext="0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn></semantics></math></span>, <span class="math-container" id="28270375" visual_id="1"><math alttext="f" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>f</mi></semantics></math></span> could be extended to a continuous function on <span class="math-container" id="28270376" visual_id="448"><math alttext="\mathbb{R}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ℝ</mi></semantics></math></span>. Such extended function would give <span class="math-container" id="28270377" visual_id="8213980"><math alttext="\begin{equation}\lim_{h\rightarrow 0}\frac{f(h)-f(0)}{h}=1\end{equation}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext>(3)3=lim→h0-⁢f(h)⁢f(0)h1</mtext></semantics></math></span> and, at the same time, <span class="math-container" id="28270378" visual_id="8213981"><math alttext="\begin{equation}\lim_{x\rightarrow 0}f^{\prime}(x)=0,\end{equation}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext>(1)1=lim→x0⁢f′(x)0,</mtext></semantics></math></span> which would <em>contradict</em> de l'Hôpital's rule.</p> <p>My question is whether it is possible or not <strong>to demonstrate</strong> that <span class="math-container" id="28270379" visual_id="1"><math alttext="f" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>f</mi></semantics></math></span> is not uniformly continuous by using <strong>only</strong> condition \eqref{one} and the definition of uniform continuity, i.e. (for the sake of completeness) <span class="math-container" id="28270380" visual_id="8213982"><math alttext="\begin{equation}\forall\epsilon,\ \exists\delta:\ \forall x,\ y\in\mathbb{Q},% \ |x-y|&amp;lt;\delta\Rightarrow|f(x)-f(y)|&amp;lt;\epsilon.\end{equation}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext>(1)1∀ϵ,∃δ:∀x,y∈Q,|x-y|&amp;lt;δ⇒|f(x)-f(y)|&amp;lt;ϵ.</mtext></semantics></math></span> </p> <p><strong>EDIT</strong>: <a href="https://math.stackexchange.com/users/127263/wojowu">Wojowu</a> pointed out to me that the function may not be differentiable once extended on <span class="math-container" id="28270381" visual_id="448"><math alttext="\mathbb{R}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ℝ</mi></semantics></math></span> (thus not contradicting de l'Hôpital's rule) . So either <span class="math-container" id="28270382" visual_id="1"><math alttext="f" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>f</mi></semantics></math></span> is not uniformly continuous or its extension to the reals fails to be differentiable. So the question now is whether this can be estabished only by means of \eqref{one} or not, and how. </p>
</div>
<hr/>
<div id="tags">
<span> real-analysis </span><span> analysis </span>
</div>
<hr/>
<div id="question-comments">
<table>
<tbody>
<tr><td comment_id="6294209"> This wouldn't contradict l'Hopital rule, because <span class="math-container" id="28270383" visual_id="929"><math alttext="f^{\prime}(x)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>f</mi><mo>′</mo></msup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow></semantics></math></span> wouldn't be defined for all real numbers. </td></tr><tr><td comment_id="6294228"> @Wojowu so you're implying that the function *cannot* be differentiable once extended over R? I can't see stright away why this must be the case. The question would still remain, however, would it not? I mean: is such a function not uniformly continuous? Why? </td></tr><tr><td comment_id="6294240"> We can deduce that either a function is not uniformly continuous, *or* the function it extends to is not differentiable. It is in fact possible that the function is uniformly continuous; I can outline a construction in an answer later, if nobody else does. </td></tr><tr><td comment_id="6294257"> @Wojowu very interesting (at least for me...). I somehow implicitly assumed that a uniformly continuous differentiable function on a dense subset of an interval had to be extendable to a (uniformly) continuous *differentiable* function on the reals. My mistake. Thanks for the hint, for now! </td></tr><tr><td comment_id="6294305"> What is the definition of a differentiable function on <span class="math-container" id="28270384" visual_id="181687"><math alttext="\mathbb{Q}\qvar@construct{$}\par" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ℚ</mi><mo>⁢</mo><mi mathcolor="red" mathvariant="italic">qvar_$</mi></mrow></semantics></math></span> </td></tr><tr><td comment_id="6294325"> @zhw definition is the same as in R. In fact differentiability itself does *not* require completeness. Completeness is necessary for theorems such as Rolle's, Lagrange's (Intermediate Value), Cauchy's (Generalized Intermediate Value), de l'Hopital's. </td></tr><tr><td comment_id="6294462"> " I somehow implicitly assumed that a uniformly continuous differentiable function on a dense subset of an interval had to be extendable to a (uniformly) continuous differentiable function on the reals." Not directly relevant to the question, but a counterexample to _this_ is trivial: Consider the function <span class="math-container" id="28270385" visual_id="4404"><math alttext="|x|" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">|</mo><mi>x</mi><mo stretchy="false">|</mo></mrow></semantics></math></span>  on the dense set <span class="math-container" id="28270386" visual_id="184872"><math alttext="(-\infty,0)\cup(0,\infty)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><mi mathvariant="normal">∞</mi></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>∪</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo>,</mo><mi mathvariant="normal">∞</mi><mo stretchy="false">)</mo></mrow></mrow></semantics></math></span>. </td></tr><tr><td comment_id="6294465"> @DavidC.Ullrich thanks a lot for your example! </td></tr>
</tbody>
</table>
</div>
</div>
<hr style="border-top: 3px double #8c8b8b"/>
</div>
<div class="row">
<div class="answer">
<div answer_id="3053240" id="answer">
<p>Actually <span class="math-container" id="28270387" visual_id="1"><math alttext="f" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>f</mi></semantics></math></span> <em>can</em> be uniformly continuous. </p> <p><strong>Edit:</strong> A hugely simplified and cleaned up version of what I posted earlier:</p> <p><strong>Oops:</strong> I just realized that what's below is not quite a counterexample to the assertion in the OP. We construct a uniformly continuous <span class="math-container" id="28270388" visual_id="3106"><math alttext="f:\mathbb{R}\to\mathbb{R}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mrow><mi>ℝ</mi><mo>→</mo><mi>ℝ</mi></mrow></mrow></semantics></math></span> such that <span class="math-container" id="28270389" visual_id="60526"><math alttext="f^{\prime}(0)=1" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msup><mi>f</mi><mo>′</mo></msup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>1</mn></mrow></semantics></math></span> and <span class="math-container" id="28270390" visual_id="742954"><math alttext="f^{\prime}(r)=0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msup><mi>f</mi><mo>′</mo></msup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>0</mn></mrow></semantics></math></span> for every non-zero rational <span class="math-container" id="28270391" visual_id="180"><math alttext="r" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>r</mi></semantics></math></span>, but there's no reason to think that <span class="math-container" id="28270392" visual_id="124087"><math alttext="f(\mathbb{Q})\subset\mathbb{Q}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>f</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>ℚ</mi><mo stretchy="false">)</mo></mrow></mrow><mo>⊂</mo><mi>ℚ</mi></mrow></semantics></math></span>. I'm leaving this here anyway because (i) the construction is quite simple, (ii) it does serve to show that the OP's argument purporting to show that <span class="math-container" id="28270393" visual_id="1"><math alttext="f" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>f</mi></semantics></math></span> cannot be uniformly continous is wrong, since that argument would work just as well for <span class="math-container" id="28270394" visual_id="98727"><math alttext="f:\mathbb{Q}\to\mathbb{R}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mrow><mi>ℚ</mi><mo>→</mo><mi>ℝ</mi></mrow></mrow></semantics></math></span>, and (iii) come to think of it it's not hard to fix it to give a literal counterexample (see <strong>Fix</strong> below).</p> <p>Say <span class="math-container" id="28270395" visual_id="214948"><math alttext="r_{1},r_{2},\dots" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mn>1</mn></msub><mo>,</mo><msub><mi>r</mi><mn>2</mn></msub><mo>,</mo><mi mathvariant="normal">…</mi></mrow></semantics></math></span> is an enumeration of the non-zero rationals. For each <span class="math-container" id="28270396" visual_id="177"><math alttext="n" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi></semantics></math></span> choose <span class="math-container" id="28270397" visual_id="8213983"><math alttext="\delta_{n}\in(0,|r_{n}|/2)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>δ</mi><mi>n</mi></msub><mo>∈</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo>,</mo><mrow><mrow><mo stretchy="false">|</mo><msub><mi>r</mi><mi>n</mi></msub><mo stretchy="false">|</mo></mrow><mo>/</mo><mn>2</mn></mrow><mo stretchy="false">)</mo></mrow></mrow></semantics></math></span> in such a way that if <span class="math-container" id="28270398" visual_id="8213984"><math alttext="I_{n}=(r_{n}-\delta_{n},r_{n}+\delta_{n})" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>n</mi></msub><mo>=</mo><mrow><mo stretchy="false">(</mo><mrow><msub><mi>r</mi><mi>n</mi></msub><mo>-</mo><msub><mi>δ</mi><mi>n</mi></msub></mrow><mo>,</mo><mrow><msub><mi>r</mi><mi>n</mi></msub><mo>+</mo><msub><mi>δ</mi><mi>n</mi></msub></mrow><mo stretchy="false">)</mo></mrow></mrow></semantics></math></span> and <span class="math-container" id="28270399" visual_id="8213985"><math alttext="E=\mathbb{R}\setminus\bigcup I_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo>=</mo><mrow><mi>ℝ</mi><mo>∖</mo><mrow><mo largeop="true" mathsize="160%" stretchy="false" symmetric="true">⋃</mo><msub><mi>I</mi><mi>n</mi></msub></mrow></mrow></mrow></semantics></math></span>then <span class="math-container" id="28270400" visual_id="8213986"><math alttext="\lim_{\rho\to 0}\frac{1}{\rho}m(E\cap(0,\rho))=\lim_{\rho\to 0}\frac{1}{\rho}m% (E\cap(-\rho,0))=1." class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mrow><msub><mo>lim</mo><mrow><mi>ρ</mi><mo>→</mo><mn>0</mn></mrow></msub><mo>⁡</mo><mrow><mfrac><mn>1</mn><mi>ρ</mi></mfrac><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mi>E</mi><mo>∩</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo>,</mo><mi>ρ</mi><mo stretchy="false">)</mo></mrow></mrow><mo stretchy="false">)</mo></mrow></mrow></mrow><mo>=</mo><mrow><msub><mo>lim</mo><mrow><mi>ρ</mi><mo>→</mo><mn>0</mn></mrow></msub><mo>⁡</mo><mrow><mfrac><mn>1</mn><mi>ρ</mi></mfrac><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mi>E</mi><mo>∩</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><mi>ρ</mi></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo stretchy="false">)</mo></mrow></mrow></mrow><mo>=</mo><mn>1</mn></mrow><mo>.</mo></mrow></semantics></math></span>(It's clear that happens if <span class="math-container" id="28270401" visual_id="254621"><math alttext="\delta_{n}\to 0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>δ</mi><mi>n</mi></msub><mo>→</mo><mn>0</mn></mrow></semantics></math></span> fast enough; <strong>Details</strong> below if it's not clear). Let <span class="math-container" id="28270402" visual_id="8213987"><math alttext="f(x)=\int_{0}^{x}\chi_{E}(t)\,dt." class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mrow><mi>f</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><msubsup><mo largeop="true" symmetric="true">∫</mo><mn>0</mn><mi>x</mi></msubsup><mrow><msub><mi>χ</mi><mi>E</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>t</mi><mo rspace="4.2pt" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo rspace="0pt">𝑑</mo><mi>t</mi></mrow></mrow></mrow></mrow><mo>.</mo></mrow></semantics></math></span>Then <span class="math-container" id="28270403" visual_id="3106"><math alttext="f:\mathbb{R}\to\mathbb{R}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mrow><mi>ℝ</mi><mo>→</mo><mi>ℝ</mi></mrow></mrow></semantics></math></span> is Lipshitz, hence uniformly continuous, <span class="math-container" id="28270404" visual_id="8213988"><math alttext="f^{\prime}(r_{n})=0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msup><mi>f</mi><mo>′</mo></msup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>r</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>0</mn></mrow></semantics></math></span> because <span class="math-container" id="28270405" visual_id="1"><math alttext="f" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>f</mi></semantics></math></span> is constant on <span class="math-container" id="28270406" visual_id="4095"><math alttext="I_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>I</mi><mi>n</mi></msub></semantics></math></span>, and the condition on density of <span class="math-container" id="28270407" visual_id="777"><math alttext="E" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>E</mi></semantics></math></span> at the origin implies that <span class="math-container" id="28270408" visual_id="60526"><math alttext="f^{\prime}(0)=1" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msup><mi>f</mi><mo>′</mo></msup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>1</mn></mrow></semantics></math></span>.</p> <hr/> <p><strong>Details:</strong> We will  show that if <span class="math-container" id="28270409" visual_id="254621"><math alttext="\delta_{n}\to 0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>δ</mi><mi>n</mi></msub><mo>→</mo><mn>0</mn></mrow></semantics></math></span> fast enough then <span class="math-container" id="28270410" visual_id="60526"><math alttext="f^{\prime}(0)=1" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msup><mi>f</mi><mo>′</mo></msup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>1</mn></mrow></semantics></math></span> (that being what we care about - it's equivalent to the statement that <span class="math-container" id="28270411" visual_id="92"><math alttext="0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn></semantics></math></span> is a point of density for  <span class="math-container" id="28270412" visual_id="777"><math alttext="E" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>E</mi></semantics></math></span>.) In fact</p> <blockquote> <blockquote> <p>If <span class="math-container" id="28270413" visual_id="8213989"><math alttext="\sum\delta_{n}/|r_{n}|&amp;lt;\infty" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo largeop="true" symmetric="true">∑</mo><mrow><mrow><msub><mi>δ</mi><mi>n</mi></msub><mo>/</mo><mrow><mo stretchy="false">|</mo><msub><mi>r</mi><mi>n</mi></msub><mo stretchy="false">|</mo></mrow></mrow><mo>&lt;</mo></mrow></mrow><mi mathvariant="normal">∞</mi></mrow></semantics></math></span> then <span class="math-container" id="28270414" visual_id="60526"><math alttext="f^{\prime}(0)=1" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msup><mi>f</mi><mo>′</mo></msup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>1</mn></mrow></semantics></math></span>.</p> </blockquote> </blockquote> <p>Note first that since <span class="math-container" id="28270415" visual_id="8213990"><math alttext="0&amp;lt;\delta_{n}&amp;lt;|r_{n}|/2" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mn>0</mn><mo>&lt;</mo></mrow><mrow><msub><mi>δ</mi><mi>n</mi></msub><mo>&lt;</mo></mrow><mrow><mrow><mo stretchy="false">|</mo><msub><mi>r</mi><mi>n</mi></msub><mo stretchy="false">|</mo></mrow><mo>/</mo><mn>2</mn></mrow></mrow></semantics></math></span> that condition is equivalent to <span class="math-container" id="28270416" visual_id="8213991"><math alttext="\sum\frac{\delta_{n}}{|r_{n}|-\delta_{n}}&amp;lt;\infty" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo largeop="true" symmetric="true">∑</mo><mrow><mfrac><msub><mi>δ</mi><mi>n</mi></msub><mrow><mrow><mo stretchy="false">|</mo><msub><mi>r</mi><mi>n</mi></msub><mo stretchy="false">|</mo></mrow><mo>-</mo><msub><mi>δ</mi><mi>n</mi></msub></mrow></mfrac><mo>&lt;</mo></mrow></mrow><mi mathvariant="normal">∞</mi></mrow></semantics></math></span>.</p> <p>Let <span class="math-container" id="28270417" visual_id="460157"><math alttext="g(x)=x-f(x)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>g</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><mi>x</mi><mo>-</mo><mrow><mi>f</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow></mrow></mrow></semantics></math></span> and <span class="math-container" id="28270418" visual_id="8213992"><math alttext="G(x)=\sum g_{n}(x)," class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mrow><mi>G</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><mo largeop="true" symmetric="true">∑</mo><mrow><msub><mi>g</mi><mi>n</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow></mrow></mrow><mo>,</mo></mrow></semantics></math></span> where <span class="math-container" id="28270419" visual_id="8213993"><math alttext="g_{n}(x)=\int_{0}^{x}\chi_{I_{n}}." class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mrow><msub><mi>g</mi><mi>n</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><msubsup><mo largeop="true" symmetric="true">∫</mo><mn>0</mn><mi>x</mi></msubsup><msub><mi>χ</mi><msub><mi>I</mi><mi>n</mi></msub></msub></mrow></mrow><mo>.</mo></mrow></semantics></math></span> We will avoid worrying about <span class="math-container" id="28270420" visual_id="151944"><math alttext="\int_{0}^{x}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mo largeop="true" symmetric="true">∫</mo><mn>0</mn><mi>x</mi></msubsup></semantics></math></span> for <span class="math-container" id="28270421" visual_id="2021"><math alttext="x&amp;lt;0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>x</mi><mo>&lt;</mo></mrow><mn>0</mn></mrow></semantics></math></span> by showing only that the right-hand derivative of <span class="math-container" id="28270422" visual_id="627"><math alttext="g" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>g</mi></semantics></math></span> at the origin vanishes; of course the same applies to the left-hand derivative. Since <span class="math-container" id="28270423" visual_id="8213994"><math alttext="0\leq\frac{g(x)-g(0)}{x}\leq\frac{G(x)}{x}\quad(x&amp;gt;0)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mn>0</mn><mo>≤</mo><mfrac><mrow><mrow><mi>g</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>-</mo><mrow><mi>g</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mrow><mi>x</mi></mfrac><mo>≤</mo><mfrac><mrow><mi>G</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mi>x</mi></mfrac></mrow><mo mathvariant="italic" separator="true"> </mo><mrow><mo stretchy="false">(</mo><mrow><mi>x</mi><mo>&gt;</mo></mrow><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></semantics></math></span>it's enough to show that <span class="math-container" id="28270424" visual_id="8213995"><math alttext="\lim_{x\to 0^{+}}\frac{G(x)}{x}=0." class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mrow><msub><mo>lim</mo><mrow><mi>x</mi><mo>→</mo><msup><mn>0</mn><mo>+</mo></msup></mrow></msub><mo>⁡</mo><mfrac><mrow><mi>G</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mi>x</mi></mfrac></mrow><mo>=</mo><mn>0</mn></mrow><mo>.</mo></mrow></semantics></math></span>Define <span class="math-container" id="28270425" visual_id="1041055"><math alttext="D_{n}(x)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>n</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow></semantics></math></span> for <span class="math-container" id="28270426" visual_id="2019"><math alttext="x\geq 0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>≥</mo><mn>0</mn></mrow></semantics></math></span> by <span class="math-container" id="28270427" visual_id="8213996"><math alttext="D_{n}(x)=\begin{cases}\frac{g_{n}(x)}{x},&amp;amp;(x&amp;gt;0),\\ 0,&amp;amp;(x=0).\end{cases}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msub><mi>D</mi><mi>n</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><mo>{</mo><mtable columnspacing="5pt" rowspacing="0pt"><mtr><mtd columnalign="left"><mrow><mfrac><mrow><msub><mi>g</mi><mi>n</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mi>x</mi></mfrac><mo>,</mo></mrow></mtd><mtd columnalign="left"><mrow><mi>a</mi><mi>m</mi><mi>p</mi><mo>;</mo><mrow><mo stretchy="false">(</mo><mi>x</mi></mrow></mrow></mtd><mtd columnalign="center"><mrow><mi>g</mi><mi>t</mi><mo>;</mo><mn>0</mn><mo stretchy="false">)</mo><mo>,</mo></mrow></mtd></mtr><mtr><mtd columnalign="left"><mrow><mn>0</mn><mo>,</mo></mrow></mtd><mtd columnalign="left"><mrow><mi>a</mi><mi>m</mi><mi>p</mi><mo>;</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>=</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>.</mo></mrow></mtd></mtr></mtable></mrow></mrow></semantics></math></span>Since <span class="math-container" id="28270428" visual_id="8213997"><math alttext="g_{n}^{\prime}(0)=0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msubsup><mi>g</mi><mi>n</mi><mo>′</mo></msubsup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>0</mn></mrow></semantics></math></span> it follows that <span class="math-container" id="28270429" visual_id="6990"><math alttext="D_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>n</mi></msub></semantics></math></span> is continuous on <span class="math-container" id="28270430" visual_id="710"><math alttext="[0,\infty)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mi mathvariant="normal">∞</mi><mo stretchy="false">)</mo></mrow></semantics></math></span>. It's clear that <span class="math-container" id="28270431" visual_id="8213998"><math alttext="D_{n}(x)=0\quad(0\leq x\leq|r_{n}|-\delta_{n})" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>n</mi></msub><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mo>=</mo><mn>0</mn><mo mathvariant="italic" separator="true"> </mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo>≤</mo><mi>x</mi><mo>≤</mo><mo stretchy="false">|</mo><msub><mi>r</mi><mi>n</mi></msub><mo stretchy="false">|</mo><mo>-</mo><msub><mi>δ</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mrow></semantics></math></span> and <span class="math-container" id="28270432" visual_id="8213999"><math alttext="|D_{n}(x)|\leq\frac{2\delta_{n}}{|r_{n}|-\delta_{n}}\quad(x&amp;gt;|r_{n}|-\delta_% {n})." class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mrow><mo stretchy="false">|</mo><mrow><msub><mi>D</mi><mi>n</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo stretchy="false">|</mo></mrow><mo>≤</mo><mrow><mfrac><mrow><mn>2</mn><mo>⁢</mo><msub><mi>δ</mi><mi>n</mi></msub></mrow><mrow><mrow><mo stretchy="false">|</mo><msub><mi>r</mi><mi>n</mi></msub><mo stretchy="false">|</mo></mrow><mo>-</mo><msub><mi>δ</mi><mi>n</mi></msub></mrow></mfrac><mo mathvariant="italic" separator="true"> </mo><mrow><mo stretchy="false">(</mo><mrow><mi>x</mi><mo>&gt;</mo></mrow><mrow><mrow><mo stretchy="false">|</mo><msub><mi>r</mi><mi>n</mi></msub><mo stretchy="false">|</mo></mrow><mo>-</mo><msub><mi>δ</mi><mi>n</mi></msub></mrow><mo stretchy="false">)</mo></mrow></mrow></mrow><mo>.</mo></mrow></semantics></math></span>So  the series <span class="math-container" id="28270433" visual_id="8214000"><math alttext="\sum D_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo largeop="true" symmetric="true">∑</mo><msub><mi>D</mi><mi>n</mi></msub></mrow></semantics></math></span> converges uniformly on <span class="math-container" id="28270434" visual_id="710"><math alttext="[0,\infty)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mi mathvariant="normal">∞</mi><mo stretchy="false">)</mo></mrow></semantics></math></span>, and hence <span class="math-container" id="28270435" visual_id="8214001"><math alttext="D=\sum D_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><mrow><mo largeop="true" symmetric="true">∑</mo><msub><mi>D</mi><mi>n</mi></msub></mrow></mrow></semantics></math></span> is continuous on <span class="math-container" id="28270436" visual_id="710"><math alttext="[0,\infty)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mi mathvariant="normal">∞</mi><mo stretchy="false">)</mo></mrow></semantics></math></span>. But <span class="math-container" id="28270437" visual_id="8214002"><math alttext="D(x)=\begin{cases}\frac{G(x)}{x},&amp;amp;(x&amp;gt;0),\\ 0,&amp;amp;(x=0);\end{cases}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>D</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><mo>{</mo><mtable columnspacing="5pt" rowspacing="0pt"><mtr><mtd columnalign="left"><mrow><mfrac><mrow><mi>G</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mi>x</mi></mfrac><mo>,</mo></mrow></mtd><mtd columnalign="left"><mrow><mi>a</mi><mi>m</mi><mi>p</mi><mo>;</mo><mrow><mo stretchy="false">(</mo><mi>x</mi></mrow></mrow></mtd><mtd columnalign="center"><mrow><mi>g</mi><mi>t</mi><mo>;</mo><mn>0</mn><mo stretchy="false">)</mo><mo>,</mo></mrow></mtd></mtr><mtr><mtd columnalign="left"><mrow><mn>0</mn><mo>,</mo></mrow></mtd><mtd columnalign="left"><mrow><mi>a</mi><mi>m</mi><mi>p</mi><mo>;</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>=</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>;</mo></mrow></mtd></mtr></mtable></mrow></mrow></semantics></math></span>hence <span class="math-container" id="28270438" visual_id="8214003"><math alttext="\lim_{x\to 0^{+}}G(x)/x=0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msub><mo>lim</mo><mrow><mi>x</mi><mo>→</mo><msup><mn>0</mn><mo>+</mo></msup></mrow></msub><mo>⁡</mo><mrow><mrow><mi>G</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>/</mo><mi>x</mi></mrow></mrow><mo>=</mo><mn>0</mn></mrow></semantics></math></span>.</p> <p><strong>Fix:</strong> A patch for the problem  mentioned in <strong>Oops</strong> above:</p> <blockquote> <blockquote> <p><strong>Lemma.</strong> Suppose <span class="math-container" id="28270439" visual_id="962"><math alttext="(y_{n})" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></semantics></math></span> is a sequence of non-zero reals. There exists a uniformly continuous <span class="math-container" id="28270440" visual_id="36958"><math alttext="\psi:\mathbb{R}\to\mathbb{R}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ψ</mi><mo>:</mo><mrow><mi>ℝ</mi><mo>→</mo><mi>ℝ</mi></mrow></mrow></semantics></math></span> such that <span class="math-container" id="28270441" visual_id="26755"><math alttext="\psi(0)=0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>ψ</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>0</mn></mrow></semantics></math></span>, <span class="math-container" id="28270442" visual_id="4692698"><math alttext="\psi^{\prime}(0)=1" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msup><mi>ψ</mi><mo>′</mo></msup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>1</mn></mrow></semantics></math></span>, and <span class="math-container" id="28270443" visual_id="8214004"><math alttext="\psi(y_{n})" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ψ</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mrow></semantics></math></span> is rational for every <span class="math-container" id="28270444" visual_id="177"><math alttext="n" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi></semantics></math></span>.</p> </blockquote> </blockquote> <p>That seems quite clear, since we're not requiring more than continuity except at one point. Anyway:</p> <p>Proof: Suppose <span class="math-container" id="28270445" visual_id="3207679"><math alttext="y_{n}\neq y_{m}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>n</mi></msub><mo>≠</mo><msub><mi>y</mi><mi>m</mi></msub></mrow></semantics></math></span> for <span class="math-container" id="28270446" visual_id="7131"><math alttext="n\neq m" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>≠</mo><mi>m</mi></mrow></semantics></math></span>. For each <span class="math-container" id="28270447" visual_id="177"><math alttext="n" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi></semantics></math></span> choose an open interval <span class="math-container" id="28270448" visual_id="4095"><math alttext="I_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>I</mi><mi>n</mi></msub></semantics></math></span> with <span class="math-container" id="28270449" visual_id="7635785"><math alttext="0\notin I_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>∉</mo><msub><mi>I</mi><mi>n</mi></msub></mrow></semantics></math></span>, <span class="math-container" id="28270450" visual_id="106792"><math alttext="y_{n}\in I_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>n</mi></msub><mo>∈</mo><msub><mi>I</mi><mi>n</mi></msub></mrow></semantics></math></span> and <span class="math-container" id="28270451" visual_id="8214005"><math alttext="y_{k}\notin I_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>k</mi></msub><mo>∉</mo><msub><mi>I</mi><mi>n</mi></msub></mrow></semantics></math></span>, <span class="math-container" id="28270452" visual_id="25052"><math alttext="1\leq k&amp;lt;n" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mrow><mrow><mi>k</mi><mo>&lt;</mo></mrow><mi>n</mi></mrow></mrow></semantics></math></span>. Let <span class="math-container" id="28270453" visual_id="8647"><math alttext="\phi_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>ϕ</mi><mi>n</mi></msub></semantics></math></span> be a continuous function supported in <span class="math-container" id="28270454" visual_id="4095"><math alttext="I_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>I</mi><mi>n</mi></msub></semantics></math></span> with <span class="math-container" id="28270455" visual_id="8214006"><math alttext="\phi_{n}(y_{n})\neq 0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msub><mi>ϕ</mi><mi>n</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mrow><mo>≠</mo><mn>0</mn></mrow></semantics></math></span>. We will let <span class="math-container" id="28270456" visual_id="8214007"><math alttext="\phi=\sum c_{n}\phi_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϕ</mi><mo>=</mo><mrow><mo largeop="true" symmetric="true">∑</mo><mrow><msub><mi>c</mi><mi>n</mi></msub><mo>⁢</mo><msub><mi>ϕ</mi><mi>n</mi></msub></mrow></mrow></mrow></semantics></math></span>for suitable constants <span class="math-container" id="28270457" visual_id="7982"><math alttext="c_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>c</mi><mi>n</mi></msub></semantics></math></span>.</p> <p>First, if <span class="math-container" id="28270458" visual_id="329121"><math alttext="c_{n}\to 0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mi>n</mi></msub><mo>→</mo><mn>0</mn></mrow></semantics></math></span> fast enough then the series converges uniformly, hence <span class="math-container" id="28270459" visual_id="116"><math alttext="\overline{\mathbb{R}\setminus\mathbb{Q}}=\mathbb{R}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mrow><mi>ℝ</mi><mo>∖</mo><mi>ℚ</mi></mrow><mo>¯</mo></mover><mo>=</mo><mi>ℝ</mi></mrow></semantics></math></span> is uniformly continuous, since the partial sums are uniformly continuous.</p> <p>Second, if <span class="math-container" id="28270460" visual_id="329121"><math alttext="c_{n}\to 0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mi>n</mi></msub><mo>→</mo><mn>0</mn></mrow></semantics></math></span> fast enough then <span class="math-container" id="28270461" visual_id="8214008"><math alttext="|\phi(x)|\leq x^{2}." class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mrow><mo stretchy="false">|</mo><mrow><mi>ϕ</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo stretchy="false">|</mo></mrow><mo>≤</mo><msup><mi>x</mi><mn>2</mn></msup></mrow><mo>.</mo></mrow></semantics></math></span>(For example, if <span class="math-container" id="28270462" visual_id="7982"><math alttext="c_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>c</mi><mi>n</mi></msub></semantics></math></span> is small enough then <span class="math-container" id="28270463" visual_id="8214009"><math alttext="|c_{n}\phi_{n}(x)|\leq x^{2}/2^{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo stretchy="false">|</mo><mrow><msub><mi>c</mi><mi>n</mi></msub><mo>⁢</mo><msub><mi>ϕ</mi><mi>n</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo stretchy="false">|</mo></mrow><mo>≤</mo><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>/</mo><msup><mn>2</mn><mi>n</mi></msup></mrow></mrow></semantics></math></span> for all <span class="math-container" id="28270464" visual_id="67"><math alttext="x" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi></semantics></math></span>.)</p> <p>Finally, it's clear that we may choose the <span class="math-container" id="28270465" visual_id="7982"><math alttext="c_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>c</mi><mi>n</mi></msub></semantics></math></span> one by one, "small enough" as in the previous two paragraphs, so that <span class="math-container" id="28270466" visual_id="8214010"><math alttext="y_{n}+\sum_{j=1}^{n}c_{j}\phi_{j}(y_{n})\in\mathbb{Q}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msub><mi>y</mi><mi>n</mi></msub><mo>+</mo><mrow><msubsup><mo largeop="true" symmetric="true">∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mrow><msub><mi>c</mi><mi>j</mi></msub><mo>⁢</mo><msub><mi>ϕ</mi><mi>j</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mrow></mrow></mrow><mo>∈</mo><mi>ℚ</mi></mrow></semantics></math></span> for all <span class="math-container" id="28270467" visual_id="177"><math alttext="n" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi></semantics></math></span>. Since <span class="math-container" id="28270468" visual_id="8214011"><math alttext="y_{n}\notin I_{j}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>n</mi></msub><mo>∉</mo><msub><mi>I</mi><mi>j</mi></msub></mrow></semantics></math></span> for <span class="math-container" id="28270469" visual_id="436502"><math alttext="j&amp;gt;n" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>j</mi><mo>&gt;</mo></mrow><mi>n</mi></mrow></semantics></math></span> this implies that <span class="math-container" id="28270470" visual_id="8214012"><math alttext="y_{n}+\phi(y_{n})=y_{n}+\sum_{j=1}^{n}c_{j}\phi_{j}(y_{n})\in\mathbb{Q}." class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mrow><msub><mi>y</mi><mi>n</mi></msub><mo>+</mo><mrow><mi>ϕ</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mrow></mrow><mo>=</mo><mrow><msub><mi>y</mi><mi>n</mi></msub><mo>+</mo><mrow><msubsup><mo largeop="true" symmetric="true">∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mrow><msub><mi>c</mi><mi>j</mi></msub><mo>⁢</mo><msub><mi>ϕ</mi><mi>j</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mrow></mrow></mrow><mo>∈</mo><mi>ℚ</mi></mrow><mo>.</mo></mrow></semantics></math></span></p> <p>Now let <span class="math-container" id="28270471" visual_id="1573237"><math alttext="\psi(x)=x+\phi(x)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>ψ</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><mi>x</mi><mo>+</mo><mrow><mi>ϕ</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow></mrow></mrow></semantics></math></span>. QED.</p> <p>Now to fix the construction above: Let <span class="math-container" id="28270472" visual_id="777"><math alttext="E" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>E</mi></semantics></math></span> and <span class="math-container" id="28270473" visual_id="1"><math alttext="f" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>f</mi></semantics></math></span> be as above. Say the connected components of <span class="math-container" id="28270474" visual_id="777"><math alttext="E" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>E</mi></semantics></math></span> are <span class="math-container" id="28270475" visual_id="806561"><math alttext="J_{1},J_{2},\dots" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>J</mi><mn>1</mn></msub><mo>,</mo><msub><mi>J</mi><mn>2</mn></msub><mo>,</mo><mi mathvariant="normal">…</mi></mrow></semantics></math></span>. Note that <span class="math-container" id="28270476" visual_id="1"><math alttext="f" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>f</mi></semantics></math></span> is constant on each <span class="math-container" id="28270477" visual_id="7842"><math alttext="J_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>J</mi><mi>n</mi></msub></semantics></math></span>; let <span class="math-container" id="28270478" visual_id="12809"><math alttext="y_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>y</mi><mi>n</mi></msub></semantics></math></span> be this constant. Choose <span class="math-container" id="28270479" visual_id="10393"><math alttext="\psi" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ψ</mi></semantics></math></span> as in the lemma and let <span class="math-container" id="28270480" visual_id="8214013"><math alttext="F=\psi\circ f" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><mrow><mi>ψ</mi><mo>∘</mo><mi>f</mi></mrow></mrow></semantics></math></span>.</p> <p>Then <span class="math-container" id="28270481" visual_id="2215427"><math alttext="F^{\prime}(0)=1" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msup><mi>F</mi><mo>′</mo></msup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>1</mn></mrow></semantics></math></span>. Also <span class="math-container" id="28270482" visual_id="8214014"><math alttext="F(0)=0\in\mathbb{Q}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>F</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>0</mn><mo>∈</mo><mi>ℚ</mi></mrow></semantics></math></span>, while if <span class="math-container" id="28270483" visual_id="180"><math alttext="r" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>r</mi></semantics></math></span> is a non-zero rational then there exists <span class="math-container" id="28270484" visual_id="177"><math alttext="n" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi></semantics></math></span> with <span class="math-container" id="28270485" visual_id="8214015"><math alttext="r\in J_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>∈</mo><msub><mi>J</mi><mi>n</mi></msub></mrow></semantics></math></span>; hence <span class="math-container" id="28270486" visual_id="6600775"><math alttext="F^{\prime}(r)=0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msup><mi>F</mi><mo>′</mo></msup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>0</mn></mrow></semantics></math></span>, since <span class="math-container" id="28270487" visual_id="75"><math alttext="F" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>F</mi></semantics></math></span> is constant on <span class="math-container" id="28270488" visual_id="7842"><math alttext="J_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>J</mi><mi>n</mi></msub></semantics></math></span>, and also <span class="math-container" id="28270489" visual_id="8214016"><math alttext="F(r)=\psi(y_{n})\in\mathbb{Q}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>F</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><mi>ψ</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mrow><mo>∈</mo><mi>ℚ</mi></mrow></semantics></math></span>.</p>
</div>
<hr/>
<div id="answer-comments">
<table>
<tbody>
<tr><td comment_id="6294558"> Cool! So this function (on <span class="math-container" id="28270490" visual_id="448"><math alttext="\mathbb{R}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ℝ</mi></semantics></math></span>) will not be differentiable in *any* neighborhood of 0! </td></tr><tr><td comment_id="6295472"> Thanks for this new version! </td></tr><tr><td comment_id="6296058"> @Matteo Decided to add details for <span class="math-container" id="28270498" visual_id="60526"><math alttext="f^{\prime}(0)=1" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msup><mi>f</mi><mo>′</mo></msup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>1</mn></mrow></semantics></math></span>, since that's the only subtle or tricky part.. </td></tr><tr><td comment_id="6296436"> Before receiving your notification I was exactly thinking to the same problem of your "Oops" and was wondering whether we could have a counterexample with <span class="math-container" id="28270492" visual_id="124087"><math alttext="f(\mathbb{Q})\subset\mathbb{Q}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>f</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>ℚ</mi><mo stretchy="false">)</mo></mrow></mrow><mo>⊂</mo><mi>ℚ</mi></mrow></semantics></math></span>! I'll need some time to get through it thouroughly. Thanks in advance! </td></tr><tr><td comment_id="6298232"> I'm not familiar with the notation <span class="math-container" id="28270493" visual_id="370458"><math alttext="m(\cdot)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mo>⋅</mo><mo stretchy="false">)</mo></mrow></mrow></semantics></math></span> and not sure about its meaning. Can you define it? </td></tr><tr><td comment_id="6298244"> @Matteo I was using <span class="math-container" id="28270494" visual_id="397167"><math alttext="m(A)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mrow></mrow></semantics></math></span> to denote the Lebesgue measure of <span class="math-container" id="28270495" visual_id="188"><math alttext="A" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi></semantics></math></span>. In fact you can ignore that - the part where <span class="math-container" id="28270499" visual_id="370458"><math alttext="m(\cdot)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mo>⋅</mo><mo stretchy="false">)</mo></mrow></mrow></semantics></math></span> comes up  was just part of an explanation why <span class="math-container" id="28270498" visual_id="60526"><math alttext="f^{\prime}(0)=1" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msup><mi>f</mi><mo>′</mo></msup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>1</mn></mrow></semantics></math></span>, and at the bottom in the **Details** section I show that <span class="math-container" id="28270498" visual_id="60526"><math alttext="f^{\prime}(0)=1" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msup><mi>f</mi><mo>′</mo></msup><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>1</mn></mrow></semantics></math></span> without mentioning <span class="math-container" id="28270499" visual_id="370458"><math alttext="m(\cdot)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mo>⋅</mo><mo stretchy="false">)</mo></mrow></mrow></semantics></math></span>. </td></tr><tr><td comment_id="6298737"> Got through the **Details** and I think I understood them. As for the **Oops** part, I cannot get why <span class="math-container" id="28270500" visual_id="8214017"><math alttext="\psi(y_{n})=y_{n}+\phi(y_{n})" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>ψ</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><msub><mi>y</mi><mi>n</mi></msub><mo>+</mo><mrow><mi>ϕ</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mrow></mrow></mrow></semantics></math></span> should be rational, even if you suppose, in the Lemma, that <span class="math-container" id="28270501" visual_id="321562"><math alttext="y_{n}\in\mathbb{R}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>n</mi></msub><mo>∈</mo><mi>ℝ</mi></mrow></semantics></math></span>. Can you explain me better that final part before QED? Thanks for the help! </td></tr><tr><td comment_id="6298769"> @Matteo I was thinking of the <span class="math-container" id="28270508" visual_id="12809"><math alttext="y_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>y</mi><mi>n</mi></msub></semantics></math></span> as rational. This one was trivial to fix... </td></tr><tr><td comment_id="6298804"> In the definition of <span class="math-container" id="28270503" visual_id="75"><math alttext="F" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>F</mi></semantics></math></span>, isn't <span class="math-container" id="28270508" visual_id="12809"><math alttext="y_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>y</mi><mi>n</mi></msub></semantics></math></span> a value taken by <span class="math-container" id="28270505" visual_id="1"><math alttext="f" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>f</mi></semantics></math></span>, so no guarantee it is rational? I may be missing some step... </td></tr><tr><td comment_id="6298817"> @Matteo No, <span class="math-container" id="28270508" visual_id="12809"><math alttext="y_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>y</mi><mi>n</mi></msub></semantics></math></span> is not rational. I made a change to the equation defining <span class="math-container" id="28270507" visual_id="7982"><math alttext="c_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>c</mi><mi>n</mi></msub></semantics></math></span>. "I was thinking of <span class="math-container" id="28270508" visual_id="12809"><math alttext="y_{n}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>y</mi><mi>n</mi></msub></semantics></math></span> as rational" was just my explanation for how the error happened - the fix is something else. </td></tr><tr><td comment_id="6298833"> Sorry... Now I see it! </td></tr>
</tbody>
</table>
</div>
</div>
<hr style="border-top: 3px double #8c8b8b"/>
</div>
<div class="row">
<div id="duplicate">
<table>
<tbody>
</tbody>
</table>
</div>
<hr/>
<div id="related">
<table>
<tbody>
<tr><td post_id="1649179"> Function <span class="math-container" id="15252034" visual_id="4051"><math alttext="\mathbb{Q}\rightarrow\mathbb{Q}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ℚ</mi><mo>→</mo><mi>ℚ</mi></mrow></semantics></math></span> with everywhere irrational derivative </td></tr>
</tbody>
</table>
</div>
</div>
</div>
</body>
</html>
