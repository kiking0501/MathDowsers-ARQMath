<!DOCTYPE html>

<html>
<head>
<title>How to check if a point is inside a non-axis-aligned rectangle?</title>
<link href="https://cdn.sstatic.net/Shared/stacks.css?v=079c5e1603be" rel="stylesheet" type="text/css"/>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript"> </script>
<link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap-theme.min.css" rel="stylesheet"/>
<style>
        .row {
          display: block;
          margin-left: auto;
          margin-right: auto;
          width:50%;
        }
        tr {
          border:1px solid lightgrey;
        }
        </style>
</head>
<body>
<div>
<div class="row" id="question-title">
<h1> How to check if a point is inside a non-axis-aligned rectangle? </h1>
<hr/>
</div>
<div class="row">
<div class="question">
<div id="question" question_id="2231116">
<p>I have a point <span class="math-container" id="20604853" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> defined by (<span class="math-container" id="20604854" visual_id="273"><math alttext="x_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>x</mi><mn>1</mn></msub></semantics></math></span>, <span class="math-container" id="20604855" visual_id="4613"><math alttext="y_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>y</mi><mn>1</mn></msub></semantics></math></span>) and a rectangle <span class="math-container" id="20604856" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> that is defined by a point <span class="math-container" id="20604857" visual_id="4"><math alttext="M" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>M</mi></semantics></math></span> (<span class="math-container" id="20604858" visual_id="584"><math alttext="x_{2}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>x</mi><mn>2</mn></msub></semantics></math></span>, <span class="math-container" id="20604859" visual_id="4628"><math alttext="y_{2}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>y</mi><mn>2</mn></msub></semantics></math></span>), height(<span class="math-container" id="20604860" visual_id="702"><math alttext="h" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>h</mi></semantics></math></span>) and width(<span class="math-container" id="20604861" visual_id="60"><math alttext="w" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>w</mi></semantics></math></span>).</p> <p>I know I can easily find out if the point is inside it if it's axis-aligned, by calculating minimum and maximum <span class="math-container" id="20604862" visual_id="67"><math alttext="x" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi></semantics></math></span> and <span class="math-container" id="20604863" visual_id="67"><math alttext="x" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi></semantics></math></span> of <span class="math-container" id="20604864" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> and comparing them with the <span class="math-container" id="20604865" visual_id="67"><math alttext="x" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi></semantics></math></span> and <span class="math-container" id="20604866" visual_id="68"><math alttext="y" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>y</mi></semantics></math></span> of <span class="math-container" id="20604867" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span>, however it doesn't work when <span class="math-container" id="20604868" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> is rotated.</p> <p>Is there a way to somehow transform <span class="math-container" id="20604869" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> without transforming <span class="math-container" id="20604870" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span>, so I can then compare them as if <span class="math-container" id="20604871" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> is axis-aligned?</p> <p>I saw a lot of methods where they calculate the points of the rectangle and then apply matrix transformations to them, but that's very computationally expensive. Is there a "minimally invasive" method, like transforming only <span class="math-container" id="20604872" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> to "fit" the rotation of <span class="math-container" id="20604873" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span>?</p> <p>I tried using the transformation matrix <span class="math-container" id="20604874" visual_id="12327"><math alttext="M_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>1</mn></msub></semantics></math></span> that represents the position, rotation, scale of <span class="math-container" id="20604875" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> and inverting it:</p> <p><span class="math-container" id="20604876" visual_id="4935373"><math alttext="M_{2}=Inverse(M_{1})" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>M</mi><mn>2</mn></msub><mo>=</mo><mrow><mi>I</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>v</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>s</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>M</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow></mrow></mrow></semantics></math></span></p> <p>And I transform <span class="math-container" id="20604877" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> with <span class="math-container" id="20604878" visual_id="3712"><math alttext="M_{2}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>2</mn></msub></semantics></math></span>, however it doesn't check out. It still only works when <span class="math-container" id="20604879" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> is axis-aligned, not when it rotates.</p> <p>Is there any other way?</p> <p>EDIT:</p> <p>The rectangle <span class="math-container" id="20604880" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> can also be defined by a 4x4 matrix(the <span class="math-container" id="20604881" visual_id="12327"><math alttext="M_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>1</mn></msub></semantics></math></span> matrix) It's the transform matrix that determines the position, rotation and scale of the rectangle, so <span class="math-container" id="20604882" visual_id="4"><math alttext="M" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>M</mi></semantics></math></span> is basically the position component of the matrix <span class="math-container" id="20604883" visual_id="12327"><math alttext="M_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>1</mn></msub></semantics></math></span>. I'm transforming <span class="math-container" id="20604884" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> by the inverse of <span class="math-container" id="20604885" visual_id="12327"><math alttext="M_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>1</mn></msub></semantics></math></span> and then trying to treat <span class="math-container" id="20604886" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> as just axis aligned, but it's not working.</p> <p>EDIT2: Here's a concrete example(some of the variables have changed, I had missed to add something):</p> <p>I have a point <span class="math-container" id="20604887" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> in 3D space and a rectangle <span class="math-container" id="20604888" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> that has its position, scale and rotation represented by the transform matrix <span class="math-container" id="20604889" visual_id="12327"><math alttext="M_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>1</mn></msub></semantics></math></span>.</p> <p>I need to transform <span class="math-container" id="20604890" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> into the "frame" of <span class="math-container" id="20604891" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span>, so I can then treat them as a 2D point and a 2D axis-aligned rectagle on a 2D plane and perform a simple test to see if the <span class="math-container" id="20604892" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> is inside <span class="math-container" id="20604893" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span>. So far I've been transforming <span class="math-container" id="20604894" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> by <span class="math-container" id="20604895" visual_id="4935374"><math alttext="M_{1}^{-}1" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>M</mi><mn>1</mn><mo>-</mo></msubsup><mo>⁢</mo><mn>1</mn></mrow></semantics></math></span>, which seems to only work when <span class="math-container" id="20604896" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> is rotated on the <span class="math-container" id="20604897" visual_id="44"><math alttext="z" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>z</mi></semantics></math></span> axis(if <span class="math-container" id="20604898" visual_id="12327"><math alttext="M_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>1</mn></msub></semantics></math></span> has a rotation on the <span class="math-container" id="20604899" visual_id="44"><math alttext="z" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>z</mi></semantics></math></span> axis). If <span class="math-container" id="20604900" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> is however tilted(rotated on the <span class="math-container" id="20604901" visual_id="67"><math alttext="x" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi></semantics></math></span> or <span class="math-container" id="20604902" visual_id="68"><math alttext="y" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>y</mi></semantics></math></span> axis), for some reason the tests of <span class="math-container" id="20604903" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> being in <span class="math-container" id="20604904" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> don't work.</p> <p>EDIT3:</p> <p><span class="math-container" id="20604905" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> center position <span class="math-container" id="20604906" visual_id="54900"><math alttext="xyz" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⁢</mo><mi>y</mi><mo>⁢</mo><mi>z</mi></mrow></semantics></math></span>: <span class="math-container" id="20604907" visual_id="1467"><math alttext="(0,0,0)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0</mn><mo>,</mo><mn>0</mn><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></semantics></math></span> <span class="math-container" id="20604908" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> rotation angles on the <span class="math-container" id="20604909" visual_id="54900"><math alttext="xyz" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⁢</mo><mi>y</mi><mo>⁢</mo><mi>z</mi></mrow></semantics></math></span> axes: <span class="math-container" id="20604910" visual_id="2226551"><math alttext="(30,30,30)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>30</mn><mo>,</mo><mn>30</mn><mo>,</mo><mn>30</mn><mo stretchy="false">)</mo></mrow></semantics></math></span> <span class="math-container" id="20604911" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> transformation matrix:</p> <p><span class="math-container" id="20604912" visual_id="12327"><math alttext="M_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>1</mn></msub></semantics></math></span> <span class="math-container" id="20604913" visual_id="4935375"><math alttext="\begin{matrix}0.875&amp;0.433&amp;-0.216&amp;0\\ -0.216&amp;0.75&amp;0.625&amp;0\\ 0.433&amp;-0.5&amp;0.75&amp;0\\ 0&amp;0&amp;0&amp;1\\ \end{matrix}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable columnspacing="5pt" displaystyle="true" rowspacing="0pt"><mtr><mtd columnalign="center"><mn>0.875</mn></mtd><mtd columnalign="center"><mn>0.433</mn></mtd><mtd columnalign="center"><mrow><mo>-</mo><mn>0.216</mn></mrow></mtd><mtd columnalign="center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center"><mrow><mo>-</mo><mn>0.216</mn></mrow></mtd><mtd columnalign="center"><mn>0.75</mn></mtd><mtd columnalign="center"><mn>0.625</mn></mtd><mtd columnalign="center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center"><mn>0.433</mn></mtd><mtd columnalign="center"><mrow><mo>-</mo><mn>0.5</mn></mrow></mtd><mtd columnalign="center"><mn>0.75</mn></mtd><mtd columnalign="center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center"><mn>0</mn></mtd><mtd columnalign="center"><mn>0</mn></mtd><mtd columnalign="center"><mn>0</mn></mtd><mtd columnalign="center"><mn>1</mn></mtd></mtr></mtable></semantics></math></span></p> <p><span class="math-container" id="20604914" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span> inverse transform (approximated):</p> <p><span class="math-container" id="20604915" visual_id="4059929"><math alttext="M_{1}^{-1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>M</mi><mn>1</mn><mrow><mo>-</mo><mn>1</mn></mrow></msubsup></semantics></math></span> <span class="math-container" id="20604916" visual_id="4935376"><math alttext="\begin{matrix}0.875&amp;-0.216&amp;0.433&amp;0\\ 0.433&amp;0.75&amp;-0.5&amp;0\\ -0.216&amp;0.625&amp;0.75&amp;0\\ 0&amp;0&amp;0&amp;1\\ \end{matrix}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable columnspacing="5pt" displaystyle="true" rowspacing="0pt"><mtr><mtd columnalign="center"><mn>0.875</mn></mtd><mtd columnalign="center"><mrow><mo>-</mo><mn>0.216</mn></mrow></mtd><mtd columnalign="center"><mn>0.433</mn></mtd><mtd columnalign="center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center"><mn>0.433</mn></mtd><mtd columnalign="center"><mn>0.75</mn></mtd><mtd columnalign="center"><mrow><mo>-</mo><mn>0.5</mn></mrow></mtd><mtd columnalign="center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center"><mrow><mo>-</mo><mn>0.216</mn></mrow></mtd><mtd columnalign="center"><mn>0.625</mn></mtd><mtd columnalign="center"><mn>0.75</mn></mtd><mtd columnalign="center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center"><mn>0</mn></mtd><mtd columnalign="center"><mn>0</mn></mtd><mtd columnalign="center"><mn>0</mn></mtd><mtd columnalign="center"><mn>1</mn></mtd></mtr></mtable></semantics></math></span></p> <p>point <span class="math-container" id="20604917" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> <span class="math-container" id="20604918" visual_id="54900"><math alttext="xyz" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⁢</mo><mi>y</mi><mo>⁢</mo><mi>z</mi></mrow></semantics></math></span> before transformation: <span class="math-container" id="20604919" visual_id="4935377"><math alttext="(0.81,-1.61,0)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0.81</mn><mo>,</mo><mrow><mo>-</mo><mn>1.61</mn></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></semantics></math></span></p> <p>point <span class="math-container" id="20604920" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> <span class="math-container" id="20604921" visual_id="54900"><math alttext="xyz" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⁢</mo><mi>y</mi><mo>⁢</mo><mi>z</mi></mrow></semantics></math></span> after transformation: <span class="math-container" id="20604922" visual_id="4935378"><math alttext="(0.014,-1.38,1.16)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0.014</mn><mo>,</mo><mrow><mo>-</mo><mn>1.38</mn></mrow><mo>,</mo><mn>1.16</mn><mo stretchy="false">)</mo></mrow></semantics></math></span></p> <p>I need point <span class="math-container" id="20604923" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> to be as if it's aligned with the transform of <span class="math-container" id="20604924" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span>, as if it's only 2D and to be able to use the simple 2D algorithm to check if <span class="math-container" id="20604925" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> is inside <span class="math-container" id="20604926" visual_id="277"><math alttext="R" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi></semantics></math></span></p> <p><a href="https://i.stack.imgur.com/2tS0q.png" rel="nofollow noreferrer"><img alt="enter image description here" src="https://i.stack.imgur.com/2tS0q.png"/></a></p>
</div>
<hr/>
<div id="tags">
<span> linear-algebra </span><span> matrices </span><span> geometry </span><span> transformation </span>
</div>
<hr/>
<div id="question-comments">
<table>
<tbody>
<tr><td comment_id="4587834"> <span class="math-container" id="20604927" visual_id="4"><math alttext="M" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>M</mi></semantics></math></span>, <span class="math-container" id="20604928" visual_id="702"><math alttext="h" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>h</mi></semantics></math></span> and <span class="math-container" id="20604929" visual_id="60"><math alttext="w" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>w</mi></semantics></math></span> don't define a rectangle until you provide information about how it's tilted. If you tell us the form that information takes (an angle? another vertex?) we can suggest an algorithm for answering your questions. </td></tr><tr><td comment_id="4587850"> @EthanBolker ah yes I edited it, thanks. </td></tr><tr><td comment_id="4588403"> It’s still not completely clear to me how <span class="math-container" id="20604945" visual_id="12327"><math alttext="M_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>1</mn></msub></semantics></math></span> represents the rectangle. Does it transform the unit square into the rectangle that you’re trying to test against? </td></tr><tr><td comment_id="4588478"> @amd <span class="math-container" id="20604945" visual_id="12327"><math alttext="M_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>1</mn></msub></semantics></math></span> is the transformation matrix of the rectangle(position, rotation, scale) </td></tr><tr><td comment_id="4591665"> Yes, but what rectangle does the example you’ve added actually represent? <span class="math-container" id="20604930" visual_id="12327"><math alttext="M_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>1</mn></msub></semantics></math></span> is a simple rotation with no translation or scaling, so is it meant to describe a rotated unit square? </td></tr>
</tbody>
</table>
</div>
</div>
<hr style="border-top: 3px double #8c8b8b"/>
</div>
<div class="row">
<div class="answer">
<div answer_id="2231137" id="answer">
<p>Your solution should work, but assuming that the matrix <span class="math-container" id="20604933" visual_id="12327"><math alttext="M_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>1</mn></msub></semantics></math></span> means what it usually means, your rectangle consists of all point <span class="math-container" id="20604934" visual_id="699233"><math alttext="Mu" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>⁢</mo><mi>u</mi></mrow></semantics></math></span>, where <span class="math-container" id="20604935" visual_id="4935379"><math alttext="u=\begin{bmatrix}x\\ y\\ 0\\ 1\end{bmatrix}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>=</mo><mrow><mo>[</mo><mtable displaystyle="true" rowspacing="0pt"><mtr><mtd columnalign="center"><mi>x</mi></mtd></mtr><mtr><mtd columnalign="center"><mi>y</mi></mtd></mtr><mtr><mtd columnalign="center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center"><mn>1</mn></mtd></mtr></mtable><mo>]</mo></mrow></mrow></semantics></math></span>, with <span class="math-container" id="20604936" visual_id="10092"><math alttext="0\leq x\leq 1" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>x</mi><mo>≤</mo><mn>1</mn></mrow></semantics></math></span>. </p> <p>In that case, letting <span class="math-container" id="20604937" visual_id="4935380"><math alttext="M_{2}=M_{1}^{-1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>M</mi><mn>2</mn></msub><mo>=</mo><msubsup><mi>M</mi><mn>1</mn><mrow><mo>-</mo><mn>1</mn></mrow></msubsup></mrow></semantics></math></span>, you can say that a point <span class="math-container" id="20604938" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> (at least a point <span class="math-container" id="20604939" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span> that's in the right plane!) is in the rectangle if</p> <p><span class="math-container" id="20604940" visual_id="4935381"><math alttext="v=M_{2}P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo>=</mo><mrow><msub><mi>M</mi><mn>2</mn></msub><mo>⁢</mo><mi>P</mi></mrow></mrow></semantics></math></span> is a point <em>in the unit square</em> (not just in <em>any</em> axis-aligned rectangle). </p> <p>If you're really sure this doesn't work for you, tell us an explicit example of the matrices <span class="math-container" id="20604941" visual_id="12327"><math alttext="M_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>1</mn></msub></semantics></math></span> and <span class="math-container" id="20604942" visual_id="3712"><math alttext="M_{2}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>2</mn></msub></semantics></math></span> and a point <span class="math-container" id="20604943" visual_id="318"><math alttext="P" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi></semantics></math></span>, and perhaps we can help you out. </p>
</div>
<hr/>
<div id="answer-comments">
<table>
<tbody>
<tr><td comment_id="4587922"> <span class="math-container" id="20604944" visual_id="699233"><math alttext="Mu" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>⁢</mo><mi>u</mi></mrow></semantics></math></span> is a matrix row? </td></tr><tr><td comment_id="4587971"> Ok I found the issue, apparently it was also rotated by the x and y axis, as a form of scaling(it's viewed by an orthographic camera from the top, so it looks 2D). So this is actually the big problem. But wouldn't multiplying by <span class="math-container" id="20604945" visual_id="12327"><math alttext="M_{1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>M</mi><mn>1</mn></msub></semantics></math></span> just rotate the point too over the square, so it makes no difference? Or am I misisng something/ </td></tr><tr><td comment_id="4588033"> You missed my last sentence: please give a concrete example of a problem, because I can't actually understand your comment above, but I think I'll get it when I see an actual example. </td></tr><tr><td comment_id="4588066"> Ok I added the entire specific problem on the last edit, sorry for missing those things before. </td></tr><tr><td comment_id="4588114"> I'm not sure if maybe calculating some kind of plane normal from the rectangle and then projecting the point on the rectangle is going to work, is that a viable option? </td></tr><tr><td comment_id="4588254"> Numbers! Give an actual example of a matrix, please. </td></tr><tr><td comment_id="4588406"> Ok I edited and added a specific example with numbers, I'll also try to add an example drawing </td></tr><tr><td comment_id="4588435"> I added a picture for clarity </td></tr>
</tbody>
</table>
</div>
</div>
<hr style="border-top: 3px double #8c8b8b"/>
</div>
<div class="row">
<div id="duplicate">
<table>
<tbody>
</tbody>
</table>
</div>
<hr/>
<div id="related">
<table>
<tbody>
</tbody>
</table>
</div>
</div>
</div>
</body>
</html>
