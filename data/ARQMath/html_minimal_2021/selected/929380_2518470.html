<!DOCTYPE html>

<html>
<head>
<title>What is wrong with the following u-substitution?</title>
<link href="https://cdn.sstatic.net/Shared/stacks.css?v=079c5e1603be" rel="stylesheet" type="text/css"/>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript"> </script>
<link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap-theme.min.css" rel="stylesheet"/>
<style>
        .row {
          display: block;
          margin-left: auto;
          margin-right: auto;
          width:50%;
        }
        tr {
          border:1px solid lightgrey;
        }
        </style>
</head>
<body>
<div>
<div class="row" id="question-title">
<h1> What is wrong with the following u-substitution? </h1>
<hr/>
</div>
<div class="row">
<div class="question">
<div id="question" question_id="929380">
<p>We will calculate <span class="math-container" id="8962967" visual_id="6345134"><math alttext="\displaystyle\int^{2\pi}_{0}x\,dx" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle displaystyle="true"><msubsup><mo largeop="true" symmetric="true">âˆ«</mo><mn>0</mn><mrow><mn>2</mn><mo>â¢</mo><mi>Ï€</mi></mrow></msubsup></mstyle><mrow><mpadded width="+1.7pt"><mi>x</mi></mpadded><mo>â¢</mo><mrow><mo rspace="0pt">ğ‘‘</mo><mi>x</mi></mrow></mrow></mrow></semantics></math></span>.  Let <span class="math-container" id="8962968" visual_id="123023"><math alttext="u=\sin(x)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>=</mo><mrow><mi>sin</mi><mo>â¡</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow></mrow></semantics></math></span>, and observe that <span class="math-container" id="8962969" visual_id="859690"><math alttext="\sin(2\pi)=0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>sin</mi><mo>â¡</mo><mrow><mo stretchy="false">(</mo><mrow><mn>2</mn><mo>â¢</mo><mi>Ï€</mi></mrow><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>0</mn></mrow></semantics></math></span> and <span class="math-container" id="8962970" visual_id="19322"><math alttext="\sin(0)=0" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>sin</mi><mo>â¡</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>0</mn></mrow></semantics></math></span>.  We also have that <span class="math-container" id="8962971" visual_id="6345135"><math alttext="\frac{du}{dx}=\cos(x)=\sqrt{1-u^{2}}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>d</mi><mo>â¢</mo><mi>u</mi></mrow><mrow><mi>d</mi><mo>â¢</mo><mi>x</mi></mrow></mfrac><mo>=</mo><mrow><mi>cos</mi><mo>â¡</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><msqrt><mrow><mn>1</mn><mo>-</mo><msup><mi>u</mi><mn>2</mn></msup></mrow></msqrt></mrow></semantics></math></span>. Hence, <span class="math-container" id="8962972" visual_id="6345136"><math alttext="\int^{2\pi}_{0}x\,dx=\int^{0}_{0}\frac{\sin^{-1}(u)}{\sqrt{1-u^{2}}}\,du=0." class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mrow><msubsup><mo largeop="true" symmetric="true">âˆ«</mo><mn>0</mn><mrow><mn>2</mn><mo>â¢</mo><mi>Ï€</mi></mrow></msubsup><mrow><mpadded width="+1.7pt"><mi>x</mi></mpadded><mo>â¢</mo><mrow><mo rspace="0pt">ğ‘‘</mo><mi>x</mi></mrow></mrow></mrow><mo>=</mo><mrow><msubsup><mo largeop="true" symmetric="true">âˆ«</mo><mn>0</mn><mn>0</mn></msubsup><mrow><mpadded width="+1.7pt"><mfrac><mrow><msup><mi>sin</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>â¡</mo><mrow><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo></mrow></mrow><msqrt><mrow><mn>1</mn><mo>-</mo><msup><mi>u</mi><mn>2</mn></msup></mrow></msqrt></mfrac></mpadded><mo>â¢</mo><mrow><mo rspace="0pt">ğ‘‘</mo><mi>u</mi></mrow></mrow></mrow><mo>=</mo><mn>0</mn></mrow><mo>.</mo></mrow></semantics></math></span> This is very obviously wrong, but I am not sure how to explain the error formally.</p> <p><strong>Edit:</strong> Thanks for the responses and in particular the link below to the related problem!  The error is indeed caused by the substitution <span class="math-container" id="8962973" visual_id="6345137"><math alttext="x=\sin^{-1}(u)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mrow><msup><mi>sin</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>â¡</mo><mrow><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo></mrow></mrow></mrow></semantics></math></span>.  The integration is performed over <span class="math-container" id="8962974" visual_id="7765"><math alttext="[0,2\pi]" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mrow><mn>2</mn><mo>â¢</mo><mi>Ï€</mi></mrow><mo stretchy="false">]</mo></mrow></semantics></math></span> which is outside the range of the <span class="math-container" id="8962975" visual_id="69703"><math alttext="\sin^{-1}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>sin</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup></semantics></math></span> function.  </p> <p><strong>Remark</strong> The error is slightly better disguised when calculating <span class="math-container" id="8962976" visual_id="6345138"><math alttext="\displaystyle\int^{1}_{-1}\frac{2x}{1+x^{2}}\,dx." class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mstyle displaystyle="true"><msubsup><mo largeop="true" symmetric="true">âˆ«</mo><mrow><mo>-</mo><mn>1</mn></mrow><mn>1</mn></msubsup></mstyle><mrow><mpadded width="+1.7pt"><mstyle displaystyle="true"><mfrac><mrow><mn>2</mn><mo>â¢</mo><mi>x</mi></mrow><mrow><mn>1</mn><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup></mrow></mfrac></mstyle></mpadded><mo>â¢</mo><mrow><mo rspace="0pt">ğ‘‘</mo><mi>x</mi></mrow></mrow></mrow><mo>.</mo></mrow></semantics></math></span></p> <p>Let <span class="math-container" id="8962977" visual_id="6345139"><math alttext="u(x)=1+x^{2}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>u</mi><mo>â¢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><mn>1</mn><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup></mrow></mrow></semantics></math></span>, and observe that <span class="math-container" id="8962978" visual_id="6345140"><math alttext="u(1)=u(-1)=2" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>u</mi><mo>â¢</mo><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><mi>u</mi><mo>â¢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><mn>1</mn></mrow><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mn>2</mn></mrow></semantics></math></span>.  Then since <span class="math-container" id="8962979" visual_id="591577"><math alttext="dx=\frac{1}{2x}du" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>d</mi><mo>â¢</mo><mi>x</mi></mrow><mo>=</mo><mrow><mfrac><mn>1</mn><mrow><mn>2</mn><mo>â¢</mo><mi>x</mi></mrow></mfrac><mo>â¢</mo><mi>d</mi><mo>â¢</mo><mi>u</mi></mrow></mrow></semantics></math></span>, we have that <span class="math-container" id="8962980" visual_id="6345141"><math alttext="\int^{1}_{-1}\frac{2x}{1+x^{2}}\,dx=\int^{2}_{2}\frac{1}{u}\,du=0." class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mrow><msubsup><mo largeop="true" symmetric="true">âˆ«</mo><mrow><mo>-</mo><mn>1</mn></mrow><mn>1</mn></msubsup><mrow><mpadded width="+1.7pt"><mfrac><mrow><mn>2</mn><mo>â¢</mo><mi>x</mi></mrow><mrow><mn>1</mn><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup></mrow></mfrac></mpadded><mo>â¢</mo><mrow><mo rspace="0pt">ğ‘‘</mo><mi>x</mi></mrow></mrow></mrow><mo>=</mo><mrow><msubsup><mo largeop="true" symmetric="true">âˆ«</mo><mn>2</mn><mn>2</mn></msubsup><mrow><mpadded width="+1.7pt"><mfrac><mn>1</mn><mi>u</mi></mfrac></mpadded><mo>â¢</mo><mrow><mo rspace="0pt">ğ‘‘</mo><mi>u</mi></mrow></mrow></mrow><mo>=</mo><mn>0</mn></mrow><mo>.</mo></mrow></semantics></math></span> This time, no trigonometric substitution is used, but it is still an incorrect proof for the same reason as above.  A correct proof can be obtained by using the fact that <span class="math-container" id="8962981" visual_id="4664087"><math alttext="x\mapsto\displaystyle\frac{2x}{1+x^{2}}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>â†¦</mo><mstyle displaystyle="true"><mfrac><mrow><mn>2</mn><mo>â¢</mo><mi>x</mi></mrow><mrow><mn>1</mn><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup></mrow></mfrac></mstyle></mrow></semantics></math></span> is odd.</p> <p>This example is more disturbing because the procedures above are entirely intuitive and yield the correct result. It seems to me that students when taught integration by substitution of definite integrals should also be taught that great care be exercised in checking the range of integration, particularly when the (apparent) substituting function is not invertible in that range.</p>
</div>
<hr/>
<div id="tags">
<span> calculus </span><span> integration </span><span> analysis </span>
</div>
<hr/>
<div id="question-comments">
<table>
<tbody>
<tr><td comment_id="1918544"> Many things. For one, we are really letting <span class="math-container" id="8962982" visual_id="1453085"><math alttext="x=\arcsin u" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mrow><mi>arcsin</mi><mo>â¡</mo><mi>u</mi></mrow></mrow></semantics></math></span>. But there is no <span class="math-container" id="8963004" visual_id="506"><math alttext="u" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>u</mi></semantics></math></span> whose sine is <span class="math-container" id="8962984" visual_id="22706"><math alttext="\gt 1" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><merror class="ltx_ERROR undefined undefined"><mtext>\gt</mtext></merror><mo>â¢</mo><mn>1</mn></mrow></semantics></math></span>. </td></tr><tr><td comment_id="1918812"> See a similar question (http://math.stackexchange.com/q/669233/72031) and its answer via the substitution <span class="math-container" id="8962985" visual_id="23417"><math alttext="u=\sin x" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>=</mo><mrow><mi>sin</mi><mo>â¡</mo><mi>x</mi></mrow></mrow></semantics></math></span> (http://math.stackexchange.com/a/669276/72031). </td></tr><tr><td comment_id="5201087"> I believe I answered the fundamental idea behind this question [in this answer](https://math.stackexchange.com/a/2010204/9754) to another question concerning <span class="math-container" id="8963004" visual_id="506"><math alttext="u" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>u</mi></semantics></math></span>-substitution. This is in particular very closely related to your second example. </td></tr>
</tbody>
</table>
</div>
</div>
<hr style="border-top: 3px double #8c8b8b"/>
</div>
<div class="row">
<div class="answer">
<div answer_id="2518470" id="answer">
<p><span class="math-container" id="8962987" visual_id="6748"><math alttext="1." class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>.</mo></mrow></semantics></math></span> Let <span class="math-container" id="8962988" visual_id="23417"><math alttext="u=\sin x" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>=</mo><mrow><mi>sin</mi><mo>â¡</mo><mi>x</mi></mrow></mrow></semantics></math></span></p> <p>so that <span class="math-container" id="8962989" visual_id="55801"><math alttext="\,du=\cos x\,dx" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mpadded lspace="1.7pt" width="+1.7pt"><mi>d</mi></mpadded><mo>â¢</mo><mi>u</mi></mrow><mo>=</mo><mrow><mi>cos</mi><mo>â¡</mo><mrow><mpadded width="+1.7pt"><mi>x</mi></mpadded><mo>â¢</mo><mi>d</mi><mo>â¢</mo><mi>x</mi></mrow></mrow></mrow></semantics></math></span>.</p> <p>Now, for <span class="math-container" id="8962990" visual_id="6641"><math alttext="x\in[0,\frac{\pi}{2}]" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆˆ</mo><mrow><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mfrac><mi>Ï€</mi><mn>2</mn></mfrac><mo stretchy="false">]</mo></mrow></mrow></semantics></math></span>, \begin{align}\cos x &amp;= \sqrt{1-u^2},\\x&amp;=\arcsin u;\end{align} for <span class="math-container" id="8962991" visual_id="988537"><math alttext="x\in[\frac{\pi}{2},\frac{3\pi}{2}]" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆˆ</mo><mrow><mo stretchy="false">[</mo><mfrac><mi>Ï€</mi><mn>2</mn></mfrac><mo>,</mo><mfrac><mrow><mn>3</mn><mo>â¢</mo><mi>Ï€</mi></mrow><mn>2</mn></mfrac><mo stretchy="false">]</mo></mrow></mrow></semantics></math></span>, \begin{align}\cos x &amp;= -\sqrt{1-u^2},\\x&amp;=\pi -\arcsin u;\end{align} for <span class="math-container" id="8962992" visual_id="6345142"><math alttext="x\in[\frac{3\pi}{2},2\pi]" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆˆ</mo><mrow><mo stretchy="false">[</mo><mfrac><mrow><mn>3</mn><mo>â¢</mo><mi>Ï€</mi></mrow><mn>2</mn></mfrac><mo>,</mo><mrow><mn>2</mn><mo>â¢</mo><mi>Ï€</mi></mrow><mo stretchy="false">]</mo></mrow></mrow></semantics></math></span>, \begin{align}\cos x &amp;= \sqrt{1-u^2},\\x&amp;=2\pi +\arcsin u.\end{align}</p> <p>Therefore \begin{align}\int^{2\pi}_0 x \,dx&amp;=\int^\frac{\pi}{2}_0 x \,dx + \int^\frac{3\pi}{2}_\frac{\pi}{2} x \,dx + \int^{2\pi}_\frac{3\pi}{2} x \,dx\\&amp;=\int^1_0 \frac{\arcsin u}{\sqrt{1-u^2}}\,du + \int^{-1}_1 \frac{\pi-\arcsin u}{-\sqrt{1-u^2}} \,du + \int^0_{-1} \frac{2\pi + \arcsin u}{\sqrt{1-u^2}} \,du\\&amp;=2\pi\int^0_{-1} \frac{\,du}{\sqrt{1-u^2}}-\pi\int^{-1}_1 \frac{\,du}{\sqrt{1-u^2}}\\&amp;=2\pi \bigg[\arcsin u\bigg]_{-1}^0 -\pi\bigg[ \arcsin u\bigg]_1^{-1}\\&amp;=2\pi^2.\end{align}</p> <p><span class="math-container" id="8962993" visual_id="17421"><math alttext="2." class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>.</mo></mrow></semantics></math></span> Re: the <strong>Remark</strong> in the original question: the integration-by-substitution proof for <span class="math-container" id="8962994" visual_id="6345143"><math alttext="\displaystyle\int^{1}_{-1}\frac{2x}{1+x^{2}}\,dx" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle displaystyle="true"><msubsup><mo largeop="true" symmetric="true">âˆ«</mo><mrow><mo>-</mo><mn>1</mn></mrow><mn>1</mn></msubsup></mstyle><mrow><mpadded width="+1.7pt"><mstyle displaystyle="true"><mfrac><mrow><mn>2</mn><mo>â¢</mo><mi>x</mi></mrow><mrow><mn>1</mn><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup></mrow></mfrac></mstyle></mpadded><mo>â¢</mo><mrow><mo rspace="0pt">ğ‘‘</mo><mi>x</mi></mrow></mrow></mrow></semantics></math></span> supplied by the OP is actually perfectly valid (so the example isn't disturbing!), even though the substitution function <span class="math-container" id="8962995" visual_id="246854"><math alttext="u=1+x^{2}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>=</mo><mrow><mn>1</mn><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup></mrow></mrow></semantics></math></span> is not injective (and certainly not invertible) on <span class="math-container" id="8962996" visual_id="87369"><math alttext="[-1,1]." class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo stretchy="false">[</mo><mrow><mo>-</mo><mn>1</mn></mrow><mo>,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><mo>.</mo></mrow></semantics></math></span></p> <p>Integration by substitution does not intrinsically require that the substitution function be invertible/bijective - or even injective or monotonic - on the interval of integration; but if the substitution function is not injective on the interval of integration, the integral <em>may</em> (or may not) need to be split up over subintervals before the substitution can be simply applied. (This applies to indefinite integrals too.)</p>
</div>
<hr/>
<div id="answer-comments">
<table>
<tbody>
</tbody>
</table>
</div>
</div>
<hr style="border-top: 3px double #8c8b8b"/>
</div>
<div class="row">
<div id="duplicate">
<table>
<tbody>
</tbody>
</table>
</div>
<hr/>
<div id="related">
<table>
<tbody>
<tr><td post_id="669233"> Inverse Functions and <span class="math-container" id="6740129" visual_id="506"><math alttext="u" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>u</mi></semantics></math></span>-Substitution </td></tr><tr><td post_id="2010189"> Are there any special rules when making a substitution in an integral? </td></tr>
</tbody>
</table>
</div>
</div>
</div>
</body>
</html>
