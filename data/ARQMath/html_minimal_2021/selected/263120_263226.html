<!DOCTYPE html>

<html>
<head>
<title>Stalk of structure sheaf on fiber product of schemes</title>
<link href="https://cdn.sstatic.net/Shared/stacks.css?v=079c5e1603be" rel="stylesheet" type="text/css"/>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript"> </script>
<link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap-theme.min.css" rel="stylesheet"/>
<style>
        .row {
          display: block;
          margin-left: auto;
          margin-right: auto;
          width:50%;
        }
        tr {
          border:1px solid lightgrey;
        }
        </style>
</head>
<body>
<div>
<div class="row" id="question-title">
<h1> Stalk of structure sheaf on fiber product of schemes </h1>
<hr/>
</div>
<div class="row">
<div class="question">
<div id="question" question_id="263120">
<p>Let <span class="math-container" id="2914010" visual_id="9515"><math alttext="X,Y" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>,</mo><mi>Y</mi></mrow></semantics></math></span> be schemes, not necessary separated. Let <span class="math-container" id="2914011" visual_id="2889"><math alttext="f:X\to Y" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mrow><mi>X</mi><mo>â†’</mo><mi>Y</mi></mrow></mrow></semantics></math></span> be a morphism of schemes and <span class="math-container" id="2914012" visual_id="5781560"><math alttext="f(x)=y~{},x\in X,~{}y\in Y" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mrow><mi>f</mi><mo>â¢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mpadded width="+3.3pt"><mi>y</mi></mpadded></mrow><mo>,</mo><mrow><mrow><mi>x</mi><mo>âˆˆ</mo><mi>X</mi></mrow><mo rspace="5.8pt">,</mo><mrow><mi>y</mi><mo>âˆˆ</mo><mi>Y</mi></mrow></mrow></mrow></semantics></math></span>. Then we have the scheme theoretic fiber over <span class="math-container" id="2914013" visual_id="68"><math alttext="y" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>y</mi></semantics></math></span>, i.e. <span class="math-container" id="2914014" visual_id="5781561"><math alttext="f^{-1}(y)=X\times_{Y}\text{Spec }\mathbb{k}(y)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><msup><mi>f</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>â¢</mo><mrow><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mrow><mrow><mi>X</mi><msub><mo>Ã—</mo><mi>Y</mi></msub><mtext>SpecÂ </mtext></mrow><mo>â¢</mo><mi>ğ•œ</mi><mo>â¢</mo><mrow><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mrow></mrow></semantics></math></span> where <span class="math-container" id="2914015" visual_id="5781562"><math alttext="\mathbb{k}(y)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ğ•œ</mi><mo>â¢</mo><mrow><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mrow></semantics></math></span> is the residue field at <span class="math-container" id="2914016" visual_id="68"><math alttext="y" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>y</mi></semantics></math></span>. I was told that <span class="math-container" id="2914017" visual_id="5781563"><math alttext="\mathcal{O}_{x,f^{-1}(y)}=\mathcal{O}_{x,X}\otimes_{\mathcal{O}_{y,Y}}\mathbb{% k}(y)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>x</mi><mo>,</mo><mrow><msup><mi>f</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>â¢</mo><mrow><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mrow></mrow></msub><mo>=</mo><mrow><mrow><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>x</mi><mo>,</mo><mi>X</mi></mrow></msub><msub><mo>âŠ—</mo><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>y</mi><mo>,</mo><mi>Y</mi></mrow></msub></msub><mi>ğ•œ</mi></mrow><mo>â¢</mo><mrow><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mrow></mrow></semantics></math></span>. I can show this fact by writing down the rings involved explicitly and the proof only works for this special fiber product. I am now asking if there is a generalization, as follows.</p> <p>Let <span class="math-container" id="2914018" visual_id="14283"><math alttext="X,Y,Z" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>,</mo><mi>Y</mi><mo>,</mo><mi>Z</mi></mrow></semantics></math></span> be schemes, <span class="math-container" id="2914019" visual_id="1871874"><math alttext="f:X\to Z,~{}g:Y\to Z" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mrow><mi>X</mi><mo>â†’</mo><mrow><mi>Z</mi><mo rspace="5.8pt">,</mo><mi>g</mi></mrow></mrow><mo>:</mo><mrow><mi>Y</mi><mo>â†’</mo><mi>Z</mi></mrow></mrow></semantics></math></span> be morphisms of schemes, suppose that <span class="math-container" id="2914020" visual_id="5781564"><math alttext="w\in W=X\times_{Z}Y" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>âˆˆ</mo><mi>W</mi><mo>=</mo><mrow><mi>X</mi><msub><mo>Ã—</mo><mi>Z</mi></msub><mi>Y</mi></mrow></mrow></semantics></math></span> such that <span class="math-container" id="2914021" visual_id="60"><math alttext="w" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>w</mi></semantics></math></span> is sent to <span class="math-container" id="2914022" visual_id="67"><math alttext="x" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi></semantics></math></span>, <span class="math-container" id="2914023" visual_id="68"><math alttext="y" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>y</mi></semantics></math></span> and <span class="math-container" id="2914024" visual_id="44"><math alttext="z" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>z</mi></semantics></math></span> in <span class="math-container" id="2914025" visual_id="115"><math alttext="X" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi></semantics></math></span>, <span class="math-container" id="2914026" visual_id="375"><math alttext="Y" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi></semantics></math></span> and <span class="math-container" id="2914027" visual_id="388"><math alttext="Z" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi></semantics></math></span> respetively. Are <span class="math-container" id="2914028" visual_id="5781565"><math alttext="\mathcal{O}_{x,X}\otimes_{\mathcal{O}_{z,Z}}\mathcal{O}_{y,Y}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>x</mi><mo>,</mo><mi>X</mi></mrow></msub><msub><mo>âŠ—</mo><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>z</mi><mo>,</mo><mi>Z</mi></mrow></msub></msub><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>y</mi><mo>,</mo><mi>Y</mi></mrow></msub></mrow></semantics></math></span> and <span class="math-container" id="2914029" visual_id="5781566"><math alttext="\mathcal{O}_{w,W}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>w</mi><mo>,</mo><mi>W</mi></mrow></msub></semantics></math></span> naturally isomorphic? Note that there might be more than one <span class="math-container" id="2914030" visual_id="60"><math alttext="w" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>w</mi></semantics></math></span> over the pair of points <span class="math-container" id="2914031" visual_id="66"><math alttext="(x,y)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></semantics></math></span>, they much have the same local rings if my guess is true.</p> <p>I tried to prove this via commutative algebra. The question is local. Let <span class="math-container" id="2914032" visual_id="14283"><math alttext="X,Y,Z" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>,</mo><mi>Y</mi><mo>,</mo><mi>Z</mi></mrow></semantics></math></span> be <span class="math-container" id="2914033" visual_id="5781567"><math alttext="\text{Spec }A,\text{Spec }B,\text{Spec }C" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mtext>SpecÂ </mtext><mo>â¢</mo><mi>A</mi></mrow><mo>,</mo><mrow><mtext>SpecÂ </mtext><mo>â¢</mo><mi>B</mi></mrow><mo>,</mo><mrow><mtext>SpecÂ </mtext><mo>â¢</mo><mi>C</mi></mrow></mrow></semantics></math></span>, respectively. Let <span class="math-container" id="2914034" visual_id="104404"><math alttext="x,y,z,w" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>,</mo><mi>y</mi><mo>,</mo><mi>z</mi><mo>,</mo><mi>w</mi></mrow></semantics></math></span> correspond to prime ideals <span class="math-container" id="2914035" visual_id="5781568"><math alttext="P_{1},P_{2},Q,I" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub><mo>,</mo><msub><mi>P</mi><mn>2</mn></msub><mo>,</mo><mi>Q</mi><mo>,</mo><mi>I</mi></mrow></semantics></math></span>, respectively. Then I have to prove that <span class="math-container" id="2914036" visual_id="5781569"><math alttext="(A\otimes_{C}B)_{I}=A_{P_{1}}\otimes_{C_{Q}}B_{P_{2}}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mo stretchy="false">(</mo><mrow><mi>A</mi><msub><mo>âŠ—</mo><mi>C</mi></msub><mi>B</mi></mrow><mo stretchy="false">)</mo></mrow><mi>I</mi></msub><mo>=</mo><mrow><msub><mi>A</mi><msub><mi>P</mi><mn>1</mn></msub></msub><msub><mo>âŠ—</mo><msub><mi>C</mi><mi>Q</mi></msub></msub><msub><mi>B</mi><msub><mi>P</mi><mn>2</mn></msub></msub></mrow></mrow></semantics></math></span>. I want to check the universal property of tensor products. Given <span class="math-container" id="2914037" visual_id="5781570"><math alttext="\alpha:A_{P_{1}}\to E,\beta:B_{P_{2}}\to E" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î±</mi><mo>:</mo><mrow><msub><mi>A</mi><msub><mi>P</mi><mn>1</mn></msub></msub><mo>â†’</mo><mrow><mi>E</mi><mo>,</mo><mi>Î²</mi></mrow></mrow><mo>:</mo><mrow><msub><mi>B</mi><msub><mi>P</mi><mn>2</mn></msub></msub><mo>â†’</mo><mi>E</mi></mrow></mrow></semantics></math></span> such than they coincide when restricted to <span class="math-container" id="2914038" visual_id="1632269"><math alttext="C_{Q}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>C</mi><mi>Q</mi></msub></semantics></math></span>, we have a unique homomorphism <span class="math-container" id="2914039" visual_id="5781571"><math alttext="\gamma:A\otimes_{C}B\to E" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi><mo>:</mo><mrow><mrow><mi>A</mi><msub><mo>âŠ—</mo><mi>C</mi></msub><mi>B</mi></mrow><mo>â†’</mo><mi>E</mi></mrow></mrow></semantics></math></span>. The only thing remaining to be checked is that <span class="math-container" id="2914040" visual_id="485"><math alttext="\gamma" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Î³</mi></semantics></math></span> maps the complement of <span class="math-container" id="2914041" visual_id="989"><math alttext="I" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>I</mi></semantics></math></span> to units. And I am stuck here.</p> <p>If my guess is true, would you help me finish my proof? Of course I will appreciate more if you give a better proof. If my guess is false, then what is the right conditions making it ture?</p>
</div>
<hr/>
<div id="tags">
<span> algebraic-geometry </span><span> commutative-algebra </span>
</div>
<hr/>
<div id="question-comments">
<table>
<tbody>
</tbody>
</table>
</div>
</div>
<hr style="border-top: 3px double #8c8b8b"/>
</div>
<div class="row">
<div class="answer">
<div answer_id="263226" id="answer">
<p>Fiber products exist in the category of locally ringed spaces (see e.g. <a href="http://arxiv.org/pdf/1103.2139.pdf">Gillam's paper</a>), and this also provides a direct construction (without gluing!) of the fiber product of schemes and reveals its explicit structure as a locally ringed space.</p> <p>If <span class="math-container" id="2914108" visual_id="44569"><math alttext="f:X\to S" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mrow><mi>X</mi><mo>â†’</mo><mi>S</mi></mrow></mrow></semantics></math></span> and <span class="math-container" id="2914109" visual_id="152858"><math alttext="g:Y\to S" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo>:</mo><mrow><mi>Y</mi><mo>â†’</mo><mi>S</mi></mrow></mrow></semantics></math></span> are morphisms of locally ringed spaces, then the fiber product <span class="math-container" id="2914110" visual_id="337251"><math alttext="X\times_{S}Y" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><msub><mo>Ã—</mo><mi>S</mi></msub><mi>Y</mi></mrow></semantics></math></span> has the following description: Elements are of the form <span class="math-container" id="2914111" visual_id="3779118"><math alttext="(x,y,s,\mathfrak{p})" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo>,</mo><mi>s</mi><mo>,</mo><mi>ğ”­</mi><mo stretchy="false">)</mo></mrow></semantics></math></span>, where <span class="math-container" id="2914112" visual_id="1469504"><math alttext="(x,y,s)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo>,</mo><mi>s</mi><mo stretchy="false">)</mo></mrow></semantics></math></span> lies in the underlying topological fiber product, i.e. <span class="math-container" id="2914113" visual_id="875"><math alttext="x\in X" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆˆ</mo><mi>X</mi></mrow></semantics></math></span>, <span class="math-container" id="2914114" visual_id="16123"><math alttext="y\in Y" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>âˆˆ</mo><mi>Y</mi></mrow></semantics></math></span> with <span class="math-container" id="2914115" visual_id="3779120"><math alttext="f(x)=s=g(y)" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>f</mi><mo>â¢</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mi>s</mi><mo>=</mo><mrow><mi>g</mi><mo>â¢</mo><mrow><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mrow></mrow></semantics></math></span>, and <span class="math-container" id="2914116" visual_id="5781589"><math alttext="\mathfrak{p}\subseteq\mathcal{O}_{X,x}\otimes_{\mathcal{O}_{S,s}}\mathcal{O}_{% Y,y}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ğ”­</mi><mo>âŠ†</mo><mrow><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>X</mi><mo>,</mo><mi>x</mi></mrow></msub><msub><mo>âŠ—</mo><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>S</mi><mo>,</mo><mi>s</mi></mrow></msub></msub><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>Y</mi><mo>,</mo><mi>y</mi></mrow></msub></mrow></mrow></semantics></math></span> is a prime ideal satisfying <span class="math-container" id="2914117" visual_id="5781590"><math alttext="\mathfrak{p}\cap\mathcal{O}_{X,x}=\mathfrak{m}_{x}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>ğ”­</mi><mo>âˆ©</mo><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>X</mi><mo>,</mo><mi>x</mi></mrow></msub></mrow><mo>=</mo><msub><mi>ğ”ª</mi><mi>x</mi></msub></mrow></semantics></math></span> and <span class="math-container" id="2914118" visual_id="5781591"><math alttext="\mathfrak{p}\cap\mathcal{O}_{Y,y}=\mathcal{m}_{y}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>ğ”­</mi><mo>âˆ©</mo><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>Y</mi><mo>,</mo><mi>y</mi></mrow></msub></mrow><mo>=</mo><msub><mi class="ltx_font_mathcaligraphic">ğ“‚</mi><mi>y</mi></msub></mrow></semantics></math></span>. The stalk of the structure sheaf at such a point is the localization <span class="math-container" id="2914119" visual_id="5781592"><math alttext="(\mathcal{O}_{X,x}\otimes_{\mathcal{O}_{S,s}}\mathcal{O}_{Y,y})_{\mathfrak{p}}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mrow><mo stretchy="false">(</mo><mrow><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>X</mi><mo>,</mo><mi>x</mi></mrow></msub><msub><mo>âŠ—</mo><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>S</mi><mo>,</mo><mi>s</mi></mrow></msub></msub><msub><mi class="ltx_font_mathcaligraphic">ğ’ª</mi><mrow><mi>Y</mi><mo>,</mo><mi>y</mi></mrow></msub></mrow><mo stretchy="false">)</mo></mrow><mi>ğ”­</mi></msub></semantics></math></span>. As for the topology and the structure sheaf in general, one uses (as in the construction of affine schemes) localization at elements <span class="math-container" id="2914120" visual_id="165233"><math alttext="f\notin\mathfrak{p}" class="ltx_Math" display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>âˆ‰</mo><mi>ğ”­</mi></mrow></semantics></math></span>.</p> <p>Actually, all this can be derived from the universal property of local schemes and the universal property of fiber products (exercise).</p>
</div>
<hr/>
<div id="answer-comments">
<table>
<tbody>
<tr><td comment_id="575205"> Thanks very much! This seems to be what I am looking for! </td></tr>
</tbody>
</table>
</div>
</div>
<hr style="border-top: 3px double #8c8b8b"/>
</div>
<div class="row">
<div id="duplicate">
<table>
<tbody>
</tbody>
</table>
</div>
<hr/>
<div id="related">
<table>
<tbody>
<tr><td post_id="2660670"> Local ring after base change </td></tr><tr><td post_id="118158"> Do you prove all theorems whilst studying? </td></tr>
</tbody>
</table>
</div>
</div>
</div>
</body>
</html>
